/*!
 *	Ok Tab Switcher
 *
 *	@author		Mitchell Petty <https://github.com/mpetty/ok-tab>
 *	@version	v1.4.5
 */
!function(a){"use strict";a.OkTab=function(b,c){return this.selector=a(b),this.settings=c,this.tabName=null,this.el={},this.el.tabContent=a("."+this.settings.tabContentClass,this.selector),this.el.primaryNav=a("."+this.settings.tabNavClass,this.selector),this.el.secondaryNav=a(this.settings.connectedTabNav),this.el.tabs=a("> ."+this.settings.tabClass,this.el.tabContent),this.el.tabNav=this.el.primaryNav.add(this.el.secondaryNav),this.el.tabLinks=a("a",this.el.tabNav).add(a("["+this.settings.tabDataLink+"]",this.el.tabContent)),this.el.curTab=null,this.el.prevTab=null,this.el.nextTab=null,window.history&&window.history.pushState||(this.settings.saveTab=!1),this.build(),this.events(),b},a.OkTab.prototype={events:function(){this.el.tabLinks.off(".okTab").on("click.okTab",a.proxy(this.onLinkClick,this)),this.settings.saveTab&&(a(window).off("popstate.okTab").on("popstate.okTab",a.proxy(this.onHashChange,this)),""!==window.location.hash&&this.activate(window.location.hash.replace("#",""),!0))},build:function(){var b=this;a("."+this.settings.tabClass+"."+this.settings.activeClass,this.el.tabContent).length?(this.el.curTab=this.el.tabs.filter("."+this.settings.tabClass+"."+this.settings.activeClass),this.el.tabs.not(this.el.curTab).hide()):(this.el.curTab=this.el.tabs.first(),this.el.curTab.addClass(this.settings.activeClass),this.el.tabs.not(":first").hide()),a("li."+this.settings.activeClass,this.el.tabNav).length||a("li:first",this.el.tabNav).addClass(this.settings.activeClass),this.el.tabNav.each(function(){a("a",a(this)).each(function(c){var d=a(this).attr("href");-1!==d.indexOf("#")&&d.length>=2?(a(this).attr("data-tabname",a(this).attr("href").replace("#","")),a(this).parent().hasClass(b.settings.activeClass)&&(b.tabName=a(this).attr("href").replace("#",""))):(a(this).attr("data-tabname",c+1),a(this).parent().hasClass(b.settings.activeClass)&&(b.tabName=c+1))})}),this.el.tabs.each(function(b){var c=a(this).attr("id");"undefined"!=typeof c&&c.length?a(this).attr("data-tabname",a(this).attr("id")):a(this).attr("data-tabname",b+1)}),this.el.tabs.each(function(){var c=a("["+b.settings.tabDataLink+"]",a(this)),d=a(this).next(),e=a(this).prev();if(c.length)for(var f=c.length-1;f>=0;f--){var g=a(c[f]).attr("href");-1!==g.indexOf("#")?a(c[f]).attr("data-tabname",a(c[f]).attr("href").replace("#","")):"next"===a(c[f]).attr(b.settings.tabDataLink)?d.length?a(c[f]).attr("data-tabname",d.attr("data-tabname")):a(c[f]).attr("data-tabname",b.el.tabs.first()):"prev"===a(c[f]).attr(b.settings.tabDataLink)&&(e.length?a(c[f]).attr("data-tabname",e.attr("data-tabname")):a(c[f]).attr("data-tabname",b.el.tabs.last()))}})},onHashChange:function(){""!==window.location.hash&&this.activate(window.location.hash.replace("#",""),!0)},onLinkClick:function(b){var c=a(b.currentTarget).attr("data-tabname");b.preventDefault(),b.stopPropagation(),this.activate(c)},activate:function(b,c){var d=this,e=a("."+d.settings.tabClass+"."+d.settings.activeClass,d.el.tabContent).attr("data-tabname"),f=d.el.tabContent.height(),g=a("> [data-tabname="+e+"]",d.el.tabContent),h=a("> [data-tabname="+b+"]",d.el.tabContent),i=null;h.length&&(this.settings.saveTab&&!c&&history.pushState({id:"OkTab"},null,"#"+encodeURIComponent(b)),0===d.el.tabContent.find("."+this.settings.tabClass+":animated").length&&e!==b&&(d.el.nextTab=h,c||d.settings.beforeTabSwitch.call(d),d.tabName=b,a("li",d.el.tabNav).removeClass(d.settings.activeClass),d.el.tabs.removeClass(d.settings.activeClass),d.el.prevTab=g,a("li",d.el.tabNav).removeClass(d.settings.activeClass),d.el.tabNav.find('[data-tabname="'+b+'"]').parent().addClass(d.settings.activeClass),c?g.hide(0,function(){h.show(0,function(){a(this).addClass(d.settings.activeClass),d.el.curTab=a(this),d.settings.afterTabSwitch.call(d)})}):(i=a("> div[data-tabname="+b+"]",d.el.tabContent).outerHeight(!0),d.el.tabContent.height(f),d.settings.scrollTop&&a(window).scrollTop()>d.el.tabContent.offset().top&&a("html, body").animate({scrollTop:d.el.tabContent.offset().top-d.settings.scrollOffset},200),g.animate({opacity:"hide"},d.settings.animSpeed,function(){h.animate({opacity:"show"},d.settings.animSpeed,function(){a(this).addClass(d.settings.activeClass),d.el.curTab=a(this),d.settings.afterTabSwitch.call(d)}),d.el.tabContent.animate({height:i},d.settings.animSpeed,function(){d.el.tabContent.css({height:"auto"})})}))))}},a.fn.okTab=function(b){return this.each(function(){var c=a.extend(!0,{},a.fn.okTab.defaults,b);return this===document?a("["+c.tabDataAttr+"]").each(function(){c.connectedTabNav='[data-tabnav="'+a(this).attr(c.tabDataAttr)+'"]',new a.OkTab(this,c)}):new a.OkTab(this,c),this})},a.fn.okTab.defaults={tabDataLink:"data-tabs-link",tabDataAttr:"data-tabs",tabClass:"tab",tabNavClass:"tabs",tabContentClass:"tabs-content",activeClass:"active",connectedTabNav:".tab-nav",saveTab:!0,animSpeed:200,scrollTop:!0,scrollOffset:0,beforeTabSwitch:a.noop,afterTabSwitch:a.noop}}(jQuery);